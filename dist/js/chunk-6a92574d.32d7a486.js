(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a92574d"],{"7f04":function(t,e,a){"use strict";a("f2af")},f2af:function(t,e,a){},fb86:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"detail"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:17}},[a("el-card",{staticClass:"left-card"},[a("el-row",{staticClass:"card-top"},[a("el-col",{attrs:{span:7}},[a("el-image",{staticClass:"top-left-img",attrs:{src:t.detail.blurPicUrl,fit:"cover"}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"}),a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})])],1),a("el-col",{attrs:{span:17}},[a("div",{staticClass:"top-right"},[a("h2",{staticClass:"top-right-title"},[t._v(t._s(t.detail.name))]),a("div",{staticClass:"top-right-release"},[a("el-image",{staticClass:"release-avatar",attrs:{src:(t.detail.artist||{}).picUrl,fit:"cover"}}),a("div",{staticClass:"release-name"},[t._v(" "+t._s((t.detail.artist||{}).name)+" ")]),a("div",{staticClass:"release-time"},[t._v(" 发行时间："+t._s(t._f("timeStampTwo")(t.detail.publishTime))+" ")])],1),a("div",{staticClass:"release-company"},[t._v(" 发行公司："+t._s(t.detail.company)+" ")]),a("div",{staticClass:"release-description"},[t._v(t._s(t.detail.description))]),a("el-link",{attrs:{type:"danger",underline:!1},on:{click:function(e){t.descriptionDialog=!0}}},[t._v(" 全部"),a("i",{staticClass:"el-icon-arrow-right"})])],1)])],1),a("div",{staticClass:"card-bottom"},[a("div",{staticClass:"bottom-button"},[a("el-button",{attrs:{type:"primary",round:"",size:"medium",icon:"el-icon-caret-right"},on:{click:t.allPlay}},[t._v("播放全部")])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.albumDetail.length,expression:"!albumDetail.length"}],staticClass:"bottom-song"},[a("PlayList",{attrs:{albumDetail:t.albumDetail}})],1)])],1)],1),a("el-col",{attrs:{span:7}},[a("el-card",{staticClass:"right-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"card-title"},[t._v("热门专辑")]),t._l(t.hotAlbum,(function(e,r){return a("div",{key:r,staticClass:"card-recommend",on:{click:function(a){return t.reload(e.id)}}},[a("div",{staticClass:"recommend-left"},[a("el-image",{staticClass:"recommend-avatar",attrs:{src:e.picUrl,fit:"cover"}})],1),a("div",{staticClass:"recommend-right"},[a("div",{staticClass:"recommend-title"},[t._v(t._s(e.name))]),a("div",{staticClass:"recommend-name"},[t._v("By. "+t._s(e.artist.name))])])])}))],2),a("el-card",{staticClass:"right-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"card-title"},[t._v("精彩评论")]),t._l(t.hotComments,(function(e,r){return a("div",{key:r,staticClass:"card-comments"},[a("div",{staticClass:"comments-left"},[a("el-avatar",{attrs:{size:40,src:e.user.avatarUrl}})],1),a("div",{staticClass:"comments-right"},[a("div",{staticClass:"right-name"},[t._v(" "+t._s(e.user.nickname)+" "),a("span",[t._v(t._s(t._f("time")(e.time)))])]),a("div",{staticClass:"right-content"},[t._v(t._s(e.content))])])])}))],2)],1),a("el-dialog",{attrs:{title:t.detail.name,visible:t.descriptionDialog,width:"30%"},on:{"update:visible":function(e){t.descriptionDialog=e}}},[a("pre",{staticClass:"dialog-content"},[t._v(t._s(t.detail.description))])])],1)],1)},s=[],i=(a("a15b"),a("d81d"),a("b0c0"),a("96cf"),a("1da1")),n=a("da49"),l={components:{PlayList:n["a"]},data:function(){return{albumId:"",detail:{},hotAlbum:[],hotComments:[],albumDetail:[],musicURL:[],songLyrics:[],descriptionDialog:!1,indexMethod:function(t){return t+1<10?"0"+(t+1):t+1}}},created:function(){this.albumId=this.$route.query.id,this.loadAlbumContent(),this.loadComments()},methods:{loadAlbumContent:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.getAlbum(t.albumId);case 2:if(a=e.sent,r=a.data,200===r.code){e.next=6;break}return e.abrupt("return",t.$message.error("专辑内容请求失败"));case 6:t.albumDetail=r.songs,t.detail=r.album,s=r.songs.map((function(t){return t.id})),t.loadSongDetail(s),t.loadHotAlbum(r.album.artist);case 11:case"end":return e.stop()}}),e)})))()},loadHotAlbum:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.getHotAlbum(t.id);case 2:if(r=a.sent,s=r.data,200===s.code){a.next=8;break}return a.abrupt("return",e.$message.error("热门专辑请求失败"));case 8:s.hotAlbums.length>=5&&(s.hotAlbums.length=5);case 9:e.hotAlbum=s.hotAlbums;case 10:case"end":return a.stop()}}),a)})))()},loadComments:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getComments(t.albumId);case 2:if(a=e.sent,r=a.data,200===r.code){e.next=6;break}return e.abrupt("return",t.$message.error("精彩评论请求失败"));case 6:t.hotComments=0===r.hotComments.length?r.comments:r.hotComments;case 7:case"end":return e.stop()}}),e)})))()},loadSongDetail:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.length>=200&&(t.length=200),r=t.join(","),a.next=4,e.$api.get(r);case 4:if(s=a.sent,i=s.data,200===i.code){a.next=8;break}return a.abrupt("return",e.$message.error("歌曲详情请求失败"));case 8:e.albumDetail=i.songs,e.loadMusicURL(t);case 10:case"end":return a.stop()}}),a)})))()},loadMusicURL:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,s,i,n,l,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.length>=200&&(t.length=200),r=t.join(","),a.next=4,e.getMusicURL(r);case 4:if(s=a.sent,i=s.data,200===i.code){a.next=8;break}return a.abrupt("return",e.$message.error("音乐URL请求失败"));case 8:for(l in n=i.data.map((function(t){return{url:t.url,id:t.id}})),n)for(o in e.albumDetail)e.albumDetail[o].id===n[l].id&&e.$set(e.albumDetail[o],"url",n[l].url);case 10:case"end":return a.stop()}}),a)})))()},allPlay:function(){var t=this.albumDetail.map((function(t){return{name:t.name,artist:t.ar[0].name,url:t.url,cover:t.al.picUrl}}));this.$root.$emit("updata:getAllSong",t)},reload:function(t){this.albumId!==t&&(this.albumId=t,this.$router.push("/albumdetail?id=".concat(t)),this.loadAlbumContent(),this.loadComments())}}},o=l,c=(a("7f04"),a("2877")),u=Object(c["a"])(o,r,s,!1,null,"7d55868e",null);e["default"]=u.exports}}]);