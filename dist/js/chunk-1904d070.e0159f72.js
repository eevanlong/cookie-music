(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1904d070"],{4833:function(e,t,r){e.exports=r.p+"img/arrow-lr.5aa8d800.5aa8d800.png"},"5a23":function(e,t,r){"use strict";r("eda5")},bc67:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detail"},[a("div",{staticClass:"detail-top"},[a("div",{staticClass:"top-background"}),a("div",{staticClass:"top-avatar"},[a("el-avatar",{attrs:{size:115,src:e.singerInfo.img1v1Url}}),a("div",[e.userDetail.level?a("i",{class:"iconfont icon-icon-test"+e.userDetail.level}):e._e(),e._v(" "+e._s(e.singerInfo.name)+" "),a("i",{class:{"el-icon-male":1===(e.userDetail.profile||{}).gender,"el-icon-female":2===(e.userDetail.profile||{}).gender}})]),a("el-button",{attrs:{round:"",plain:"",icon:"el-icon-plus",size:"medium"},on:{click:function(t){return e.follow()}}},[e._v("关注ta")])],1),a("div",{staticClass:"top-profile"},[e._v(" "+e._s(e.singerInfo.briefDesc)+" ")]),a("div",{staticClass:"top-info"},[a("span",[a("div",{staticClass:"info-num"},[e._v(e._s(e.singerInfo.musicSize))]),a("div",[e._v("单曲数")])]),a("span",[a("div",{staticClass:"info-num"},[e._v(e._s(e.singerInfo.albumSize))]),a("div",[e._v("专辑数")])]),a("span",[a("div",{staticClass:"info-num"},[e._v(e._s(e.singerInfo.mvSize))]),a("div",[e._v("MV")])]),(e.userDetail.profile||{}).followeds?a("span",[a("div",{staticClass:"info-num"},[e._v(" "+e._s(e._f("playCount")((e.userDetail.profile||{}).followeds))+" ")]),a("div",[e._v("粉丝")])]):e._e()]),a("img",{staticClass:"top-modification",attrs:{src:r("4833")}})]),a("div",{staticClass:"detail-bottom"},[a("el-tabs",{attrs:{stretch:""},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"作品",name:"works"}},[a("el-button",{staticClass:"single-allPlay",attrs:{type:"primary",round:"",size:"medium",icon:"el-icon-caret-right"},on:{click:e.allPlay}},[e._v(" 播放全部 ")]),a("PlayList",{directives:[{name:"loading",rawName:"v-loading",value:!e.single.length,expression:"!single.length"}],attrs:{single:e.single}})],1),a("el-tab-pane",{attrs:{label:"专辑",name:"album"}},[a("Albums",{directives:[{name:"loading",rawName:"v-loading",value:!e.album.length,expression:"!album.length"}],attrs:{album:e.album}})],1),a("el-tab-pane",{attrs:{label:"MV",name:"MV"}},[e.video.length?a("Videos",{directives:[{name:"loading",rawName:"v-loading",value:!e.video.length,expression:"!video.length"}],attrs:{video:e.video}}):a("div",{staticClass:"noMore"},[e._v("暂无MV")])],1),a("el-tab-pane",{attrs:{label:"歌手简介",name:"profile"}},[a("div",{staticClass:"bottom-profile"},[a("h2",[e._v("歌手简介")]),a("div",[e._v(e._s(e.profile.briefDesc))]),e._l(e.profile.introduction,(function(t,r){return a("div",{key:r},[a("h3",[e._v(e._s(t.ti))]),a("pre",[e._v(e._s(t.txt))])])}))],2)]),a("el-tab-pane",{attrs:{label:"相似歌手",name:"similar"}},[e.singer.length?a("el-row",{staticClass:"bottom-similar",staticStyle:{"flex-flow":"row wrap"},attrs:{gutter:40,type:"flex"}},e._l(e.singer,(function(t,r){return a("el-col",{key:r,attrs:{span:3}},[a("div",{staticClass:"com-singer",on:{click:function(r){return e.reload(t.id)}}},[a("el-image",{staticClass:"singer-img",attrs:{src:t.picUrl||t.img1v1Url,fit:"cover"}},[a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"}),a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"})]),a("div",{staticClass:"singer-name"},[e._v(e._s(t.name))])],1)])})),1):a("div",{staticClass:"noMore"},[e._v("暂无相似")])],1)],1)],1)])},i=[],n=(r("a15b"),r("d81d"),r("b0c0"),r("96cf"),r("1da1")),s=r("da49"),o=r("fd29"),l=r("4489"),c={components:{PlayList:s["a"],Albums:o["a"],Videos:l["a"]},data:function(){return{activeName:"works",singerId:null,userDetail:{},singerInfo:{},single:[],album:[],video:[],profile:{},singer:[]}},created:function(){var e=localStorage.getItem("cookie");this.singerId=this.$route.query.id,this.loadUserDetail(e),this.loadSingerSingle()},methods:{loadUserDetail:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.$axios.get("/user/detail",{params:{uid:t.$route.query.accountId,cookie:e}});case 3:if(a=r.sent,i=a.data,200===i.code){r.next=7;break}return r.abrupt("return",t.$message.error("请求失败"));case 7:t.userDetail=i,r.next=13;break;case 10:return r.prev=10,r.t0=r["catch"](0),r.abrupt("return");case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},loadSingerSingle:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/artists",{params:{id:e.singerId}});case 2:if(r=t.sent,a=r.data,200===a.code){t.next=6;break}return t.abrupt("return",e.$message.error("请求失败"));case 6:e.singerInfo=a.artist,e.single=a.hotSongs,i=a.hotSongs.map((function(e){return e.id})),e.loadMusicURL(i);case 10:case"end":return t.stop()}}),t)})))()},loadSingerAlbum:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/artist/album",{params:{id:e.singerId,limit:30}});case 2:if(r=t.sent,a=r.data,200===a.code){t.next=6;break}return t.abrupt("return",e.$message.error("请求失败"));case 6:e.album=a.hotAlbums;case 7:case"end":return t.stop()}}),t)})))()},loadSingerMV:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/artist/mv",{params:{id:e.singerId}});case 2:if(r=t.sent,a=r.data,200===a.code){t.next=6;break}return t.abrupt("return",e.$message.error("请求失败"));case 6:e.video=a.mvs;case 7:case"end":return t.stop()}}),t)})))()},loadSingerProfile:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/artist/desc",{params:{id:e.singerId}});case 2:if(r=t.sent,a=r.data,200===a.code){t.next=6;break}return t.abrupt("return",e.$message.error("请求失败"));case 6:e.profile=a;case 7:case"end":return t.stop()}}),t)})))()},loadSingerSimilar:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/simi/artist",{params:{id:e.singerId}});case 2:if(r=t.sent,a=r.data,200===a.code){t.next=6;break}return t.abrupt("return",e.$message.error("请求失败"));case 6:e.singer=a.artists;case 7:case"end":return t.stop()}}),t)})))()},follow:function(){var e=localStorage.getItem("cookie");if(!e)return this.$notify({title:"消息",message:"请先登录",type:"warning",position:"top-left"})},handleClick:function(e){switch(e.name){case"works":this.loadSingerSingle();break;case"album":this.loadSingerAlbum();break;case"MV":this.loadSingerMV();break;case"profile":this.loadSingerProfile();break;case"similar":this.loadSingerSimilar();break}},loadMusicURL:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a,i,n,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$axios.get("/song/url?id=".concat(e.join(",")));case 2:if(a=r.sent,i=a.data,200===i.code){r.next=6;break}return r.abrupt("return",t.$message.error("音乐URL请求失败"));case 6:for(s in n=i.data.map((function(e){return{url:e.url,id:e.id}})),n)for(o in t.single)t.single[o].id===n[s].id&&t.$set(t.single[o],"url",n[s].url);case 8:case"end":return r.stop()}}),r)})))()},allPlay:function(){var e=this.single.map((function(e){return{name:e.name,artist:e.ar[0].name,url:e.url,cover:e.al.picUrl}}));this.$root.$emit("updata:getAllSong",e)},reload:function(e){if(this.singerId!==e){this.singerId=e,this.$router.push({path:"/singerdetail",query:{id:e}});var t=localStorage.getItem("cookie");this.loadUserDetail(t),this.loadSingerSingle(),this.activeName="works"}}}},u=c,d=(r("5a23"),r("2877")),g=Object(d["a"])(u,a,i,!1,null,null,null);t["default"]=g.exports},eda5:function(e,t,r){}}]);