(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-330232ac"],{9471:function(e,t,a){},ac74:function(e,t,a){"use strict";a("9471")},df3d:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detail"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:17}},[a("el-card",{staticClass:"left-card"},[a("div",{staticClass:"left-video"},[a("video",{staticClass:"video",attrs:{autoplay:"",src:e.videoDetail.url,type:"video/mp4",controls:""}})]),a("div",{staticClass:"left-title"},[e._v(e._s(e.videoDetail.title))]),a("div",{staticClass:"left-time"},[a("span",[e._v("发布："+e._s(e._f("timeStampTwo")(e.videoDetail.publishTime)))]),a("span",[e._v("播放次数："+e._s(e._f("playCount")(Number(e.videoDetail.playTime)||Number(e.videoDetail.playCount))))])]),a("div",{staticClass:"left-relay"},[a("span",[a("el-button",{attrs:{plain:"",round:"",size:"small",icon:"el-icon-thumb"}},[e._v(" "+e._s(e.videoDetail.praisedCount||e.videoDetail.likedCount)+" ")])],1),a("span",[a("el-button",{attrs:{plain:"",round:"",size:"small",icon:"el-icon-star-off"}},[e._v(" "+e._s(e.videoDetail.subscribeCount||e.videoDetail.subCount)+" ")])],1),a("span",[a("el-button",{attrs:{plain:"",round:"",size:"small",icon:"el-icon-share"}},[e._v(" "+e._s(e.videoDetail.shareCount)+" ")])],1)]),a("div",{staticClass:"left-total"},[a("i",{staticClass:"el-icon-chat-dot-round"}),e._v("Comments "),a("el-divider",{attrs:{direction:"vertical"}}),e._v(e._s(e.videoComment.length)+" 条评论 ")],1),a("el-divider"),a("div",{staticClass:"comments-title"},[e._v("精彩评论")]),e._l(e.videoComment,(function(t,r){return a("div",{key:r,staticClass:"card-comments"},[a("div",{staticClass:"comments-left"},[a("el-avatar",{attrs:{size:40,src:t.user.avatarUrl}})],1),a("div",{staticClass:"comments-right"},[a("div",{staticClass:"right-name"},[e._v(" "+e._s(t.user.nickname)+" "),a("span",[e._v(e._s(e._f("time")(t.time)))])]),a("div",{staticClass:"right-content"},[e._v(e._s(t.content))])])])}))],2)],1),a("el-col",{attrs:{span:7}},[a("el-card",{staticClass:"right-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"card-title"},[e._v("视频简介")]),e.videoDetail.description?a("div",[a("div",{staticClass:"right-author"},[a("el-avatar",{attrs:{size:40,src:e.videoDetail.avatarUrl}}),a("span",[e._v(e._s(((e.videoDetail||{}).creator||{}).nickname))])],1),a("div",{staticClass:"right-description"},[e._v(e._s(e.videoDetail.description))])]):e.videoDetail.desc?a("div",{staticClass:"right-description"},[e._v(" "+e._s(e.videoDetail.desc)+" ")]):a("div",{staticClass:"right-description"},[e._v("视频暂无简介")])]),a("el-card",{staticClass:"right-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"card-title"},[e._v("相关推荐")]),e._l(e.relevantVideo,(function(t,r){return a("div",{key:r,staticClass:"recommend-video",on:{click:function(a){return e.reload(t.vid||t.id)}}},[a("el-image",{staticClass:"video-img",attrs:{src:t.coverUrl||t.cover,fit:"cover"}}),a("div",{staticClass:"video-title"},[e._v(e._s(t.title||t.name))]),e._l(t.artists,(function(t,r){return a("span",{key:r,staticClass:"video-author"},[e._v(" "+e._s((t.creator||[]).userName||t.name)+" ")])}))],2)}))],2)],1)],1)],1)},i=[],n=(a("99af"),a("96cf"),a("1da1")),s={data:function(){return{videoId:"",videoDetail:{},videoComment:[],relevantVideo:[]}},created:function(){this.videoId=this.$route.query.id,this.videoId.length>30&&this.loadVideoDetail(),this.loadMVDetail()},methods:{loadVideoDetail:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.get("/video/detail?id=".concat(e.videoId));case 2:if(a=t.sent,r=a.data,200===r.code){t.next=6;break}return t.abrupt("return",e.$message.error("请求失败"));case 6:e.videoDetail=r.data,e.loadVideoURL(),e.loadVideoRelay(),e.loadVideoComment(),e.loadRelevantVideo();case 11:case"end":return t.stop()}}),t)})))()},loadVideoURL:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getVideoURL(e.videoId);case 2:if(a=t.sent,r=a.data,200===r.code){t.next=6;break}return t.abrupt("return",e.$message.error("请求失败"));case 6:e.$set(e.videoDetail,"url",r.urls[0].url);case 7:case"end":return t.stop()}}),t)})))()},loadVideoRelay:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getVideoRelay(e.videoId);case 2:if(a=t.sent,r=a.data,200===r.code){t.next=6;break}return t.abrupt("return",e.$message.error("请求失败"));case 6:e.$set(e.videoDetail,"shareCount",r.shareCount);case 7:case"end":return t.stop()}}),t)})))()},loadVideoComment:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getVideoComment(e.videoId);case 2:if(a=t.sent,r=a.data,200===r.code){t.next=6;break}return t.abrupt("return",e.$message.error("请求失败"));case 6:e.videoComment=r.hotComments.concat(r.comments);case 7:case"end":return t.stop()}}),t)})))()},loadRelevantVideo:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getRelevantVideo(e.videoId);case 2:if(a=t.sent,r=a.data,200===r.code){t.next=6;break}return t.abrupt("return",e.$message.error("请求失败"));case 6:e.relevantVideo=r.data;case 7:case"end":return t.stop()}}),t)})))()},loadMVDetail:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getMVDetail(e.videoId);case 2:if(a=t.sent,r=a.data,200===r.code){t.next=6;break}return t.abrupt("return",e.$message.error("加载MV详情失败"));case 6:e.videoDetail=r.data,e.loadMVURL(),e.loadMVRelay(),e.loadMVComment(),e.loadRelevantMV();case 11:case"end":return t.stop()}}),t)})))()},loadMVURL:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getMVURL(e.videoId);case 2:if(a=t.sent,r=a.data,200===r.code){t.next=6;break}return t.abrupt("return",e.$message.error("请求失败"));case 6:e.$set(e.videoDetail,"url",r.data.url);case 7:case"end":return t.stop()}}),t)})))()},loadMVRelay:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getMVRelay(e.videoId);case 2:if(a=t.sent,r=a.data,200===r.code){t.next=6;break}return t.abrupt("return",e.$message.error("请求失败"));case 6:e.$set(e.videoDetail,"shareCount",r.shareCount),e.$set(e.videoDetail,"likedCount",r.likedCount);case 8:case"end":return t.stop()}}),t)})))()},loadMVComment:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getMVComment(e.videoId);case 2:if(a=t.sent,r=a.data,200===r.code){t.next=6;break}return t.abrupt("return",e.$message.error("请求失败"));case 6:e.videoComment=r.hotComments.concat(r.comments);case 7:case"end":return t.stop()}}),t)})))()},loadRelevantMV:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getRelevantMV(e.videoId);case 2:if(a=t.sent,r=a.data,200===r.code){t.next=6;break}return t.abrupt("return",e.$message.error("请求失败"));case 6:e.relevantVideo=r.mvs;case 7:case"end":return t.stop()}}),t)})))()},reload:function(e){this.videoId!==e&&(this.videoId=e,this.$router.push("/videodetail?id=".concat(e)),this.videoId.length>30&&this.loadVideoDetail(),this.loadMVDetail())}}},o=s,c=(a("ac74"),a("2877")),d=Object(c["a"])(o,r,i,!1,null,"627f5b99",null);t["default"]=d.exports}}]);